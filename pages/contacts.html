<!DOCTYPE html>
<html lang="ru">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width,initial-scale=1.0">
    <title>Контакты - Портфолио студента</title>

    <link href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/css/bootstrap.min.css" rel="stylesheet">
    <link href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.11.3/font/bootstrap-icons.css" rel="stylesheet">
    <link rel="stylesheet" href="../styles/styles.css">
    <style>
        .sr-only {
            position: absolute;
            width: 1px;
            height: 1px;
            padding: 0;
            margin: -1px;
            overflow: hidden;
            clip: rect(0, 0, 0, 0);
            white-space: nowrap;
            border: 0;
        }
        
        .required::after {
            content: " *";
            color: #d63384;
        }
        
        .error {
            border-color: #dc3545;
            background-color: #f8d7da;
        }
        
        .error-message {
            color: #dc3545;
            font-size: 0.875em;
            margin-top: 0.25rem;
        }
        
        .success-message {
            color: #198754;
            background: #d1e7dd;
            padding: 1rem;
            border-radius: 4px;
            margin: 1rem 0;
            border: 1px solid #badbcc;
        }
        
        .form-control:focus,
        .btn:focus {
            outline: 2px solid #0066cc;
            outline-offset: 2px;
        }
    </style>
</head>
<body>
    <div class="page-container">
        <header class="header">
            <div class="container">
                <h1>Портфолио студента</h1>
                <p>ЭФБО-01-24</p>
            </div>
        </header>

        <nav class="nav" aria-label="Основная навигация">
            <div class="container">
                <ul class="nav-list">
                    <li class="nav-item"><a href="../index.html" class="nav-link">Главная</a></li>
                    <li class="nav-item"><a href="projects.html" class="nav-link">Проекты</a></li>
                    <li class="nav-item"><a href="diary.html" class="nav-link">Дневник</a></li>
                    <li class="nav-item">
                        <a href="contacts.html" class="nav-link active" aria-current="page">Контакты</a>
                    </li>
                </ul>
            </div>
        </nav>

        <main class="content">
            <div class="container">
                <section class="contact-section" aria-labelledby="contact-heading">
                    <h2 id="contact-heading" class="section-title">Свяжитесь со мной</h2>
                    
                    <form id="contactForm" class="contact-form" method="POST" action="https://formspree.io/f/manzpjjz">
                        <fieldset aria-labelledby="personal-info-legend">
                            <legend id="personal-info-legend" class="sr-only">Персональная информация</legend>
                            
                            <div class="mb-3">
                                <label for="name" class="form-label required">Имя</label>
                                <input type="text" 
                                       class="form-control" 
                                       id="name" 
                                       name="name"
                                       required 
                                       aria-required="true"
                                       aria-describedby="name-hint">
                                <span id="name-hint" class="sr-only">Введите ваше полное имя</span>
                                <div id="name-error" class="error-message" aria-live="polite"></div>
                            </div>

                            <div class="mb-3">
                                <label for="email" class="form-label required">Email</label>
                                <input type="email" 
                                       class="form-control" 
                                       id="email" 
                                       name="email"
                                       required 
                                       aria-required="true"
                                       aria-describedby="email-hint">
                                <span id="email-hint" class="sr-only">Обязательное поле для обратной связи</span>
                                <div id="email-error" class="error-message" aria-live="polite"></div>
                            </div>
                        </fieldset>

                        <fieldset aria-labelledby="message-info-legend">
                            <legend id="message-info-legend" class="sr-only">Информация о сообщении</legend>
                            
                            <div class="mb-3">
                                <label for="subject" class="form-label required">Тема сообщения</label>
                                <select class="form-control" 
                                        id="subject" 
                                        name="subject" 
                                        required 
                                        aria-required="true"
                                        aria-describedby="subject-hint">
                                    <option value="">Выберите тему</option>
                                    <option value="general">Общий вопрос</option>
                                    <option value="support">Техническая поддержка</option>
                                    <option value="partnership">Сотрудничество</option>
                                    <option value="study">Учебные вопросы</option>
                                </select>
                                <span id="subject-hint" class="sr-only">Выберите тему вашего обращения</span>
                                <div id="subject-error" class="error-message" aria-live="polite"></div>
                            </div>

                            <div class="mb-3">
                                <label for="message" class="form-label required">Сообщение</label>
                                <textarea class="form-control" 
                                          id="message" 
                                          name="message"
                                          rows="5" 
                                          required 
                                          aria-required="true"
                                          aria-describedby="message-hint"
                                          placeholder="Опишите ваш вопрос подробно..."></textarea>
                                <span id="message-hint" class="sr-only">Минимальная длина сообщения - 10 символов</span>
                                <div id="message-error" class="error-message" aria-live="assertive"></div>
                            </div>
                        </fieldset>

                        <div class="mb-3" role="group" aria-label="Согласие на обработку данных">
                            <div class="form-check">
                                <input class="form-check-input" 
                                       type="checkbox" 
                                       id="consent" 
                                       name="consent" 
                                       required 
                                       aria-required="true">
                                <label class="form-check-label required" for="consent">
                                    Я согласен на обработку персональных данных
                                </label>
                                <div id="consent-error" class="error-message" aria-live="polite"></div>
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn btn-primary">
                                Отправить сообщение
                            </button>
                            <button type="reset" class="btn btn-secondary">
                                Очистить форму
                            </button>
                        </div>
                    </form>

                    <div id="form-status" aria-live="polite" aria-atomic="true"></div>

                    <div class="contact-info" aria-labelledby="contact-info-heading">
                        <h3 id="contact-info-heading" class="h4 mt-4">Контактная информация</h3>
                        <p><i class="bi bi-envelope-fill" aria-hidden="true"></i> 
                            <span>Email: </span>
                            <a href="mailto:ArgentiLover86@yandex.ru">ArgentiLover86@yandex.ru</a>
                        </p>
                        <p><i class="bi bi-github" aria-hidden="true"></i> 
                            <span>GitHub: </span>
                            <a href="https://github.com/ArgentiLover" target="_blank" aria-label="GitHub профиль ArgentiLover (откроется в новой вкладке)">ArgentiLover</a>
                        </p>
                        <p><i class="bi bi-geo-alt-fill" aria-hidden="true"></i> 
                            <span>Москва, Россия</span>
                        </p>
                    </div>
                </section>
            </div>
        </main>

        <footer class="footer">
            <div class="container">
                <p>© <span id="year"></span> Гроцкий Д.А | Контакты: ArgentiLover86@yandex.ru | GitHub: ArgentiLover</p>
            </div>
        </footer>
    </div>

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.3/dist/js/bootstrap.bundle.min.js"></script>
    <script src="../scripts/main.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', function() {
            const contactForm = document.getElementById('contactForm');
            const formStatus = document.getElementById('form-status');

            contactForm.addEventListener('submit', function(e) {
                if (!validateForm()) {
                    e.preventDefault();
                } else {
                    showSuccessMessage();
                }
            });

            function validateForm() {
                const form = document.getElementById('contactForm');
                const fields = form.querySelectorAll('[required]');
                let isValid = true;

                form.querySelectorAll('.error').forEach(el => el.classList.remove('error'));
                form.querySelectorAll('.error-message').forEach(el => el.textContent = '');

                fields.forEach(field => {
                    const errorElement = document.getElementById(`${field.id}-error`);
                    
                    if (!field.value.trim()) {
                        field.classList.add('error');
                        field.setAttribute('aria-invalid', 'true');
                        const label = field.labels ? field.labels[0].textContent.replace(' *', '') : 'поле';
                        errorElement.textContent = `Поле "${label}" обязательно для заполнения`;
                        isValid = false;
                    } else {
                        field.setAttribute('aria-invalid', 'false');
                        
                        if (field.type === 'email' && !isValidEmail(field.value)) {
                            field.classList.add('error');
                            field.setAttribute('aria-invalid', 'true');
                            errorElement.textContent = 'Введите корректный email адрес';
                            isValid = false;
                        }
                    }
                });

                const messageField = document.getElementById('message');
                const messageError = document.getElementById('message-error');
                if (messageField.value.length > 0 && messageField.value.length < 10) {
                    messageField.classList.add('error');
                    messageField.setAttribute('aria-invalid', 'true');
                    messageError.textContent = 'Сообщение должно содержать минимум 10 символов';
                    isValid = false;
                }

                return isValid;
            }

            function isValidEmail(email) {
                return /^[^\s@]+@[^\s@]+\.[^\s@]+$/.test(email);
            }

            function showSuccessMessage() {
                formStatus.innerHTML = `
                    <div class="success-message" role="alert">
                        <strong>Сообщение отправлено!</strong> Я свяжусь с вами в ближайшее время.
                    </div>
                `;
                
                setTimeout(() => {
                    formStatus.innerHTML = '';
                }, 5000);
            }

            document.addEventListener('keydown', function(e) {
                if (e.key === 'Escape') {
                    document.querySelectorAll('.error').forEach(el => {
                        el.classList.remove('error');
                        el.setAttribute('aria-invalid', 'false');
                    });
                    document.querySelectorAll('.error-message').forEach(el => el.textContent = '');
                }
            });

            document.getElementById('message').addEventListener('input', function() {
                const errorElement = document.getElementById('message-error');
                if (this.value.length > 0 && this.value.length < 10) {
                    errorElement.textContent = 'Сообщение должно содержать минимум 10 символов';
                    this.setAttribute('aria-invalid', 'true');
                } else {
                    errorElement.textContent = '';
                    this.setAttribute('aria-invalid', 'false');
                }
            });
        });
    </script>
</body>
</html>